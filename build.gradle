plugins {
    id 'java'
    id 'war'
}

group 'com.imooc'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8

repositories {
    //配置maven私服
//    maven: ''
    // 使用本地仓库
    mavenLocal()
    // 使用中央仓库
    mavenCentral()
}

dependencies {
    compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'
    compile group: 'org.projectlombok', name: 'lombok', version: '1.16.20'
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

// 定义一个闭包
def createDir = {
    path ->
        File dir = new File(path)
        if (!dir.exists()) {
            dir.mkdirs()
        }
}

// 定义多个任务
tasks {
    // 自定义任务
    task makeJavaDir() {
        def paths = ['src/main/java', 'src/main/resources', 'src/test/java', 'src/test/resources']
        doFirst {
            paths.forEach(createDir)
        }
    }
    // 依赖上一个任务
    task makeWebDir() {
        dependsOn(makeJavaDir)
        def paths = ['src/main/webapp', 'src/test/webapp']
        doLast {
            paths.forEach(createDir)
        }
    }
}



